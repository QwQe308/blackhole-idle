<html>
<head>
<link rel="stylesheet" type="text/css" href="blackhole.css" />
</head>
<body>
<txt id=mass class=mass>x</txt>
<txt id=proc class=proc>x</txt>
<txt id=dim0 class=dim0>如果你看到这条文字 就说明游戏出了bug</txt>
<txt id=dim1 class=dim1>x</txt>
<txt id=dim2 class=dim2>x</txt>
<txt id=dim3 class=dim3>x</txt>
<txt id=dimmult0 class=dimmult0>x</txt>
<txt id=dimmult1 class=dimmult1>x</txt>
<txt id=dimmult2 class=dimmult2>x</txt>
<txt id=dimmult3 class=dimmult3>x</txt>
<txt id=flame class=flame>x</txt>
<script src=OmegaNum.js></script>
<script>
//初始化
	//元素大小定义
document.getElementById('dim0').style.fontSize='30px'
document.getElementById('dim1').style.fontSize='30px'
document.getElementById('dim2').style.fontSize='30px'
document.getElementById('dim3').style.fontSize='30px'
document.getElementById('mass').style.fontSize='40px'
	//变量定义
var t = new Date()
var i = 0
var a = OmegaNum(0)
var dim = []
var dimmult = []
var procmult= []
var mass = OmegaNum(0)
var user = 'test'
for(i=0;i<=3;i++){
dim[i]=OmegaNum(1)
dimmult[i]=OmegaNum(1)
procmult[i]=OmegaNum(1)
}
var timedelay = 0
var timestart = Number(t.getTime())
var id = setInterval(loop, 1000/30);
//循环
function loop(){
	//计时
t = new Date()
timedelay = (Number(t.getTime())-timestart)/1000
timestart = Number(t.getTime())
document.getElementById("flame").innerHTML = 'fps:'+Math.round(1/timedelay)
	//维度生产
for(i=2;i>=0;i--){
dim[i]=dim[i].add(((dim[i+1].mul(dimmult[i+1])).root(2)).mul(timedelay))
}
for(i=3;i>=0;i--){
procmult[i]=procmult[i].add(dim[i].mul(dimmult[i]))
}
a=OmegaNum(1)
for(i=3;i>=0;i--){
a=a.mul(procmult[i])
}
mass=mass.add(a.mul(timedelay))
	//显示
document.getElementById("dim0").innerHTML = showInt(dim[0])
document.getElementById("dim1").innerHTML = showInt(dim[1])
document.getElementById("dim2").innerHTML = showInt(dim[2])
document.getElementById("dim3").innerHTML = showInt(dim[3])
document.getElementById("dimmult0").innerHTML = '零维引力发生器  X '+showInt(dimmult[0])
document.getElementById("dimmult1").innerHTML = '一维引力发生器  X '+showInt(dimmult[1])
document.getElementById("dimmult2").innerHTML = '二维引力发生器  X '+showInt(dimmult[2])
document.getElementById("dimmult3").innerHTML = '三维引力发生器  X '+showInt(dimmult[3])
document.getElementById("mass").innerHTML = '质量:  '+showInt(mass)
document.getElementById("proc").innerHTML = showInt(procmult[0])+" x "+showInt(procmult[1])+' x '+showInt(procmult[2])+' x '+showInt(procmult[3])+' = +'+showInt(a)+'/s'
}
//显示辅助
function showInt(num){
var b=num.floor(0)
if(num.lt(OmegaNum(1000))){
return b
}else{
return b.toExponential(2)
}}

function save(){
localStorage.setItem("save",JSON.stringify(user));
}

function load(){
var save = JSON.parse(localStorage.getItem("save"));
}

function clear(){
localStorage.removeItem("save");
}
</script>
</body>
</html>